<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>TERRAFORM IN vSPHERE | Olivia Snowden&#39;s Blog</title>
<meta name="keywords" content="home-lab, linux, vms">
<meta name="description" content="Introduction to Terraform
Terraform by Hashicorp is a &ldquo;tool for building, changing, and versioning infrastructure safely and efficiently&rdquo;. Terraform works using infrastructure as code, meaning that build a blueprint of the resources you need in a configuration file (with the .tf extension) and Terraform builds that infrastructure for you.  The Terraform package itself is a single binary file, easily downloaded, and is used to build/edit/destroy your resources.
In contrast to older versions of infrastructure build tools like Packer, Terraform allows you to create infrastructure across multiple cloud providers and is &ldquo;smart&rdquo; enough to know how many more machines to create in context of what you already have. For example, if you have 5 servers on Azure, but you want 10, Terraform will build 5 more for you to bring you to a total of 10 versus building 10 more servers and leaving you with 15.">
<meta name="author" content="Olivia Snowden">
<link rel="canonical" href="//localhost:1313/terraform-in-vsphere/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7f8702ad4c3159231ff7aa5f7bf1a574a69e60a988350dee1489d2c17b25d91e.css" integrity="sha256-f4cCrUwxWSMf96pfe/GldKaeYKmINQ3uFInSwXsl2R4=" rel="preload stylesheet" as="style">
<link rel="icon" href="//localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="//localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="//localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="//localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="//localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="//localhost:1313/terraform-in-vsphere/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script><meta property="og:url" content="//localhost:1313/terraform-in-vsphere/">
  <meta property="og:site_name" content="Olivia Snowden&#39;s Blog">
  <meta property="og:title" content="TERRAFORM IN vSPHERE">
  <meta property="og:description" content="Introduction to Terraform Terraform by Hashicorp is a “tool for building, changing, and versioning infrastructure safely and efficiently”. Terraform works using infrastructure as code, meaning that build a blueprint of the resources you need in a configuration file (with the .tf extension) and Terraform builds that infrastructure for you. The Terraform package itself is a single binary file, easily downloaded, and is used to build/edit/destroy your resources.
In contrast to older versions of infrastructure build tools like Packer, Terraform allows you to create infrastructure across multiple cloud providers and is “smart” enough to know how many more machines to create in context of what you already have. For example, if you have 5 servers on Azure, but you want 10, Terraform will build 5 more for you to bring you to a total of 10 versus building 10 more servers and leaving you with 15.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2020-07-08T00:00:00+00:00">
    <meta property="article:modified_time" content="2020-07-08T00:00:00+00:00">
    <meta property="article:tag" content="Home-Lab">
    <meta property="article:tag" content="Linux">
    <meta property="article:tag" content="Vms">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="TERRAFORM IN vSPHERE">
<meta name="twitter:description" content="Introduction to Terraform
Terraform by Hashicorp is a &ldquo;tool for building, changing, and versioning infrastructure safely and efficiently&rdquo;. Terraform works using infrastructure as code, meaning that build a blueprint of the resources you need in a configuration file (with the .tf extension) and Terraform builds that infrastructure for you.  The Terraform package itself is a single binary file, easily downloaded, and is used to build/edit/destroy your resources.
In contrast to older versions of infrastructure build tools like Packer, Terraform allows you to create infrastructure across multiple cloud providers and is &ldquo;smart&rdquo; enough to know how many more machines to create in context of what you already have. For example, if you have 5 servers on Azure, but you want 10, Terraform will build 5 more for you to bring you to a total of 10 versus building 10 more servers and leaving you with 15.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "//localhost:1313/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "TERRAFORM IN vSPHERE",
      "item": "//localhost:1313/terraform-in-vsphere/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "TERRAFORM IN vSPHERE",
  "name": "TERRAFORM IN vSPHERE",
  "description": "Introduction to Terraform Terraform by Hashicorp is a \u0026ldquo;tool for building, changing, and versioning infrastructure safely and efficiently\u0026rdquo;. Terraform works using infrastructure as code, meaning that build a blueprint of the resources you need in a configuration file (with the .tf extension) and Terraform builds that infrastructure for you. The Terraform package itself is a single binary file, easily downloaded, and is used to build/edit/destroy your resources.\nIn contrast to older versions of infrastructure build tools like Packer, Terraform allows you to create infrastructure across multiple cloud providers and is \u0026ldquo;smart\u0026rdquo; enough to know how many more machines to create in context of what you already have. For example, if you have 5 servers on Azure, but you want 10, Terraform will build 5 more for you to bring you to a total of 10 versus building 10 more servers and leaving you with 15.\n",
  "keywords": [
    "home-lab", "linux", "vms"
  ],
  "articleBody": "Introduction to Terraform Terraform by Hashicorp is a “tool for building, changing, and versioning infrastructure safely and efficiently”. Terraform works using infrastructure as code, meaning that build a blueprint of the resources you need in a configuration file (with the .tf extension) and Terraform builds that infrastructure for you. The Terraform package itself is a single binary file, easily downloaded, and is used to build/edit/destroy your resources.\nIn contrast to older versions of infrastructure build tools like Packer, Terraform allows you to create infrastructure across multiple cloud providers and is “smart” enough to know how many more machines to create in context of what you already have. For example, if you have 5 servers on Azure, but you want 10, Terraform will build 5 more for you to bring you to a total of 10 versus building 10 more servers and leaving you with 15.\nA helpful feature of Terraform is the ability to plan your infrastructure before it is constructed. There are four basic terraform commands: terraform init, terraform plan, terraform apply, and terraform destroy. terraform plan is what allows you to see what resources are being created/destroyed based on your configuration file. If everything checks out, terraform apply builds your infrastructure and reports on what was created. terraform destroy, you guessed it, easily destroys the resources defined in your configuration file and reports on what was destroyed.\nThe ability to create cross-platform resources is due to Terraform’s many providers that support API interactions between their platform and Terraform. As you’ll see below, once you define the provider of your choice in your configuration file you run terraform init to initialize the directory containing your Terraform config files. If you already have files created running terraform init will push any changes made since the command was run last.\nUsing Terraform to build a VM I used Terraform to create and destroy a VM in the vSphere environment I built in my home computer lab. VMware vSphere is a Terraform provider, and an example configuration file along with information on how to create complex resources can be found on Terraform’s website. However, I used a configuration file found on GitHub that worked well for practicing Terraform. These steps assume that you have a vCenter server set up and at least one functioning VM template.\nSTEP 1 Download Terraform\nDepending on the OS of your machine, you can easily download Terraform in a number of ways. Since I use a MacBook and have homebrew installed I ran brew install terraform to download the single binary file. Adding --version to the name of a package will allow you to check 1) that the package actually downloaded and 2) the version you have installed. I quickly ran terraform --version to check that the file installed correctly and noted the version.\nSTEP 2 Create a configuration file\nCreate a file and give it a .tf extension. The first few lines of the configuration file should define the provider you choose to use and list the login information for your account there. In my configuration file I included the username/password of my VMware account and the ip address of my vCenter server. This allows Terraform to be able to “log in” and create the resources for me. I also included an allow_unverified_ssl line, since my vSphere environment doesn’t have a certificate signed by any official authority and I didn’t want Terraform to throw a security error. At this point you can run terraform init to check that your configuration file successfully uses Terraform to reach the provider you chose and initialize.\nAfter you define the provider you wish to use, you list the information Terraform requires to work in vCenter. You can write your configuration file in JSON but I used the Hashicorp Configuration Language (HCL), which is easily readable and developed by Hashicorp especially for Terraform. There are a wide variety of options that you can list to create a VM, all are explained on Terraform’s website, but the configuration file I used had a few simple data sources:\nvsphere_datacenter: the name of the datacenter where your VMs live vsphere_resource_pool: the name of the resource pool your VMs are under (if you do not have one put your_clustername/Resources in place of the name) vsphere_host: the IP address of the host where you would like your new VM(s) deployed vsphere_datastore: the name of the datastore where you store your VM ISO files (the storage device connected to your VMs) vshpere_network: the name of the network you would like your new VM(s) in vsphere_virtual_machine: the name of the VM template that you would like to use to create your new machine(s) You can see each data source is defined by the “data” keyword, the official name of the source, and then a friendly name. You then list the name of the appropriate feature in your vSphere environment and a datacenter_id. The datacenter_id is the managed object ID of the your datacenter. The line datacenter_id = data.vsphere_datacenter.dc.id stays the same for each data source since it points to the same place (your datacenter). It is basically a query for the ID of your unique datacenter, and the query looks different for older versions of Terraform.\nOnce you define your data sources, you need to create a resource and call on those data sources to build it. Each resource begins with the “resource” keyword\" and the official name/friendly name. You then give the VM a name, the CPU/memory specifications and a list of managed object IDs. These lines are similar to the datacenter_id variable but instead of calling on your datacenter they call on your: datastore, host, resource pool, VM template, and network. The basic format is:\nsource_id = data.officialname.friendlyname.id The only exceptions are the two variables that come from your VM template. Instead of a .id they end with a ._nameofvariable_ since they weren’t explicitly listed as data sources. Then list the specifications of the disk of your new VM.\nFinally, you give the new VM you want created from the template a unique configuration. Since I was using an Ubuntu template, I customized using linux_options. I also gave the VM a new IP address/mask/DNS/gateway so that it would be able to connect to the internet as soon as it was created.\n**STEP 3 Terraform plan **\nOnce you have your configuration file written, you can run terraform plan. This allows you to check for errors in the file and fix them, and review the infrastructure you outlined to make sure it what you want. I wrote my config file in Visual Studio Code, and ran terraform commands from the terminal there.\nAfter terraform plan outlines the infrastructure you included in the configuration file it lists how many resources you plan to add/chance/destroy.\n**STEP 4 Terraform apply **\nIf terraform plan doesn’t throw any errors and shows the infrastructure you want, run terraform apply to build your resources.\nYou will be asked to confirm that you want the resources built, this point is your last chance to go back and edit your configuration file before the resources are created.\nAs terraform apply was run I was able to watch it execute tasks in my vSphere client. Once it was finished, I had a new VM “vm-one”!\n**STEP 5 Terraform destroy **\nOnce you are finished with the resources you created, you can run terraform destroy to easily tear down the machines defined in your configuration file.\nAfter I ran terraform destroy I went back to my vSphere Client and saw the vm-one was successfully removed.\nThere are a wide variety of ways you could write the configuration file to build a VM with Terraform, the file I used is only one option. In addition to VMware vSphere, Terraform can be used to create/maintain/destroy resources in Azure, AWS, and more.\n",
  "wordCount" : "1302",
  "inLanguage": "en",
  "datePublished": "2020-07-08T00:00:00Z",
  "dateModified": "2020-07-08T00:00:00Z",
  "author":[{
    "@type": "Person",
    "name": "Olivia Snowden"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "//localhost:1313/terraform-in-vsphere/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Olivia Snowden's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "//localhost:1313/favicon.ico"
    }
  }
}
</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="//localhost:1313/" accesskey="h" title="Olivia Snowden&#39;s Blog (Alt + H)">Olivia Snowden&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="//localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="//localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="//localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="//localhost:1313/">Home</a>&nbsp;»&nbsp;<a href="//localhost:1313/post/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      TERRAFORM IN vSPHERE
    </h1>
    <div class="post-meta"><span title='2020-07-08 00:00:00 +0000 UTC'>Wed, Jul 8, 2020</span>&nbsp;·&nbsp;<span>7 min</span>&nbsp;·&nbsp;<span>Olivia Snowden</span>

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#introduction-to-terraform" aria-label="Introduction to Terraform">Introduction to Terraform</a></li>
                <li>
                    <a href="#using-terraform-to-build-a-vm" aria-label="Using Terraform to build a VM">Using Terraform to build a VM</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h4 id="introduction-to-terraform">Introduction to Terraform<a hidden class="anchor" aria-hidden="true" href="#introduction-to-terraform">#</a></h4>
<p><a href="https://www.terraform.io/intro/index.html">Terraform</a> by Hashicorp is a &ldquo;tool for building, changing, and versioning infrastructure safely and efficiently&rdquo;. Terraform works using infrastructure as code, meaning that build a blueprint of the resources you need in a configuration file (with the <code>.tf </code>extension) and Terraform builds that infrastructure for you.  The Terraform package itself is a single binary file, easily downloaded, and is used to build/edit/destroy your resources.</p>
<p>In contrast to older versions of infrastructure build tools like Packer, Terraform allows you to create infrastructure across multiple cloud providers and is &ldquo;smart&rdquo; enough to know how many more machines to create in context of what you already have. For example, if you have 5 servers on Azure, but you want 10, Terraform will build 5 more for you to bring you to a total of 10 versus building 10 more servers and leaving you with 15.</p>
<p>A helpful feature of Terraform is the ability to plan your infrastructure before it is constructed. There are four basic terraform commands: <code>terraform init</code>, <code>terraform plan</code>, <code>terraform apply</code>, and <code>terraform destroy</code>. <code>terraform plan</code> is what allows you to see what resources are being created/destroyed based on your configuration file. If everything checks out, <code>terraform apply</code> builds your infrastructure and reports on what was created. <code>terraform destroy</code>, you guessed it, easily destroys the resources defined in your configuration file and reports on what was destroyed.</p>
<p>The ability to create cross-platform resources is due to Terraform&rsquo;s <a href="https://www.terraform.io/docs/providers/index.html">many providers</a> that support API interactions between their platform and Terraform. As you&rsquo;ll see below, once you define the provider of your choice in your configuration file you run <code>terraform init</code> to initialize the directory containing your Terraform config files. If you already have files created running <code>terraform init</code> will push any changes made since the command was run last.</p>
<h4 id="using-terraform-to-build-a-vm">Using Terraform to build a VM<a hidden class="anchor" aria-hidden="true" href="#using-terraform-to-build-a-vm">#</a></h4>
<p>I used Terraform to create and destroy a VM in the vSphere environment I built in my home computer lab. VMware vSphere is a Terraform provider, and an example configuration file along with information on how to create complex resources can be found on <a href="https://www.terraform.io/docs/providers/vsphere/index.html">Terraform&rsquo;s website.</a>  However, I used a configuration file found on <a href="https://github.com/diodonfrost/terraform-vsphere-examples">GitHub </a> that worked well for practicing Terraform. These steps assume that you have a vCenter server set up and at least one functioning VM template.</p>
<p><strong>STEP 1 Download Terraform</strong></p>
<p><img loading="lazy" src="/terraform-1.png"></p>
<p>Depending on the OS of your machine, you can easily download Terraform in a number of <a href="https://www.terraform.io/downloads.html">ways</a>.  Since I use a MacBook and have homebrew installed I ran <code>brew install terraform</code> to download the single binary file. Adding <code>--version</code> to the name of a package will allow you to check 1) that the package actually downloaded and 2)  the version you have installed. I quickly ran <code>terraform --version </code>to check that the file installed correctly and noted the version.</p>
<p><img loading="lazy" src="/terraform-2.png"></p>
<p><strong>STEP 2 Create a configuration file</strong></p>
<p><img loading="lazy" src="/terraform-3.png"></p>
<p>Create a file and give it a <code>.tf</code> extension. The first few lines of the configuration file should define the provider you choose to use and list the login information for your account there. In my configuration file I included the username/password of my VMware account and the ip address of my vCenter server. This allows Terraform to be able to &ldquo;log in&rdquo; and create the resources for me. I also included an <code>allow_unverified_ssl</code> line, since my vSphere environment doesn&rsquo;t have a certificate signed by any official authority and I didn&rsquo;t want Terraform to throw a security error. At this point you can run <code>terraform init</code> to check that your configuration file successfully uses Terraform to reach the provider you chose and initialize.</p>
<p><img loading="lazy" src="/terraform-4.png"></p>
<p>After you define the provider you wish to use, you list the information Terraform requires to work in vCenter. You can write your configuration file in JSON but I used the Hashicorp Configuration Language (HCL), which is easily readable and developed by Hashicorp especially for Terraform. There are a wide variety of options that you can list to create a VM, all are explained on Terraform&rsquo;s website, but the configuration file I used had a few simple data sources:</p>
<ul>
<li>vsphere_datacenter: the name of the datacenter where your VMs live</li>
<li>vsphere_resource_pool: the name of the resource pool your VMs are under (if you do not have one put <em>your_clustername</em>/Resources in place of the name)</li>
<li>vsphere_host: the IP address of the host where you would like your new VM(s) deployed</li>
<li>vsphere_datastore: the name of the datastore where you store your VM ISO files (the storage device connected to your VMs)</li>
<li>vshpere_network: the name of the network you would like your new VM(s) in</li>
<li>vsphere_virtual_machine: the name of the VM template that you would like to use to create your new machine(s)</li>
</ul>
<p>You can see each data source is defined by the &ldquo;data&rdquo; keyword, the official name of the source, and then a friendly name. You then list the name of the appropriate feature in your vSphere environment and a datacenter_id. The datacenter_id is the managed object ID of the your datacenter. The line <code>datacenter_id = data.vsphere_datacenter.dc.id</code> stays the same for each data source since it points to the same place (your datacenter). It is basically a query for the ID of your unique datacenter, and the query looks different for older versions of Terraform.</p>
<p><img loading="lazy" src="/terraform-5.png"></p>
<p>Once you define your data sources, you need to create a resource and call on those data sources to build it. Each resource begins with the &ldquo;resource&rdquo; keyword&quot; and the official name/friendly name. You then give the VM a name, the CPU/memory specifications and a list of managed object IDs. These lines are similar to the datacenter_id variable but instead of calling on your datacenter they call on your: datastore, host, resource pool, VM template, and network. The basic format is:</p>
<pre><code>&lt;em&gt;source&lt;/em&gt;_id = data.&lt;em&gt;officialname&lt;/em&gt;.&lt;em&gt;friendlyname&lt;/em&gt;.id 
</code></pre>
<p>The only exceptions are the two variables that come from your VM template. Instead of a <code>.id</code> they end with a<code> ._nameofvariable_</code> since they weren&rsquo;t explicitly listed as data sources. Then list the specifications of the disk of your new VM.</p>
<p><img loading="lazy" src="/terraform-6.png"></p>
<p>Finally, you give the new VM you want created from the template a unique configuration. Since I was using an Ubuntu template, I customized using <code>linux_options</code>.  I also gave the VM a new IP address/mask/DNS/gateway so that it would be able to connect to the internet as soon as it was created.</p>
<p>**STEP 3 Terraform plan **</p>
<p>Once you have your configuration file written, you can run <code>terraform plan</code>. This allows you to check for errors in the file and fix them, and review the infrastructure you outlined to make sure it what you want. I wrote my config file in Visual Studio Code, and ran terraform commands from the terminal there.</p>
<p><img loading="lazy" src="/terraform-7.png"></p>
<p>After <code>terraform plan</code> outlines the infrastructure you included in the configuration file it lists how many resources you plan to add/chance/destroy.</p>
<p><img loading="lazy" src="/terraform-8.png"></p>
<p>**STEP 4 Terraform apply **</p>
<p>If <code>terraform plan </code>doesn&rsquo;t throw any errors and shows the infrastructure you want, run <code>terraform apply</code> to build your resources.</p>
<p><img loading="lazy" src="/terraform-9.png"></p>
<p>You will be asked to confirm that you want the resources built, this point is your last chance to go back and edit your configuration file before the resources are created.</p>
<p><img loading="lazy" src="/terraform-10.png"></p>
<p>As terraform apply was run I was able to watch it execute tasks in my vSphere client. Once it was finished, I had a new VM &ldquo;vm-one&rdquo;!</p>
<p><img loading="lazy" src="/terraform-11.png"></p>
<p>**STEP 5 Terraform destroy **</p>
<p>Once you are finished with the resources you created, you can run <code>terraform destroy</code> to easily tear down the machines defined in your configuration file.</p>
<p><img loading="lazy" src="/terraform-12.png"></p>
<p><img loading="lazy" src="/terraform-13.png"></p>
<p>After I ran <code>terraform destroy</code> I went back to my vSphere Client and saw the vm-one was successfully removed.</p>
<p><img loading="lazy" src="/terraform-14.png"></p>
<p>There are a wide variety of ways you could write the configuration file to build a VM with Terraform, the file I used is only one option. In addition to VMware vSphere, Terraform can be used to create/maintain/destroy resources in Azure, AWS, and more.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="//localhost:1313/tags/home-lab/">Home-Lab</a></li>
      <li><a href="//localhost:1313/tags/linux/">Linux</a></li>
      <li><a href="//localhost:1313/tags/vms/">Vms</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="//localhost:1313/raspberry-pi-kubernetes/">
    <span class="title">« Prev</span>
    <br>
    <span>RASPI KUBERNETES CLUSTER WITH RANCHER</span>
  </a>
  <a class="next" href="//localhost:1313/vmware-and-vsphere/">
    <span class="title">Next »</span>
    <br>
    <span>vSPHERE INTRODUCTION</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share TERRAFORM IN vSPHERE on x"
            href="https://x.com/intent/tweet/?text=TERRAFORM%20IN%20vSPHERE&amp;url=%2f%2flocalhost%3a1313%2fterraform-in-vsphere%2f&amp;hashtags=home-lab%2clinux%2cvms">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share TERRAFORM IN vSPHERE on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2f%2flocalhost%3a1313%2fterraform-in-vsphere%2f&amp;title=TERRAFORM%20IN%20vSPHERE&amp;summary=TERRAFORM%20IN%20vSPHERE&amp;source=%2f%2flocalhost%3a1313%2fterraform-in-vsphere%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share TERRAFORM IN vSPHERE on reddit"
            href="https://reddit.com/submit?url=%2f%2flocalhost%3a1313%2fterraform-in-vsphere%2f&title=TERRAFORM%20IN%20vSPHERE">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share TERRAFORM IN vSPHERE on facebook"
            href="https://facebook.com/sharer/sharer.php?u=%2f%2flocalhost%3a1313%2fterraform-in-vsphere%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share TERRAFORM IN vSPHERE on whatsapp"
            href="https://api.whatsapp.com/send?text=TERRAFORM%20IN%20vSPHERE%20-%20%2f%2flocalhost%3a1313%2fterraform-in-vsphere%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share TERRAFORM IN vSPHERE on telegram"
            href="https://telegram.me/share/url?text=TERRAFORM%20IN%20vSPHERE&amp;url=%2f%2flocalhost%3a1313%2fterraform-in-vsphere%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share TERRAFORM IN vSPHERE on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=TERRAFORM%20IN%20vSPHERE&u=%2f%2flocalhost%3a1313%2fterraform-in-vsphere%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>© <a href="https://github.com/adityatelange/hugo-PaperMod/graphs/contributors">PaperMod Contributors</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
